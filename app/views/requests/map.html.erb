<html>
  <head>
    <br><br>
    <style>
      #totally-different-map {
        width: 500px;
        height: 400px;
      }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js"></script>
      <%= javascript_tag "var requests = #{@requests.to_json}" %>
      <%= javascript_tag "var latitude = #{@requests.first[:latitude].to_json}"%>
      <%= javascript_tag "var longitude = #{@requests.first[:longitude].to_json}"%>
    	<!-- $.each(console.log(requests)) -->
    	<script>

	      var map;
	      var geocoder;
	      function initialize() {
	        var mapCanvas = document.getElementById('totally-different-map');
	        var differentMapOptions = {
	          center: new google.maps.LatLng(41.889797, -87.637756),
	          zoom: 14,
	          mapTypeId: google.maps.MapTypeId.ROADMAP,
	          tilt: 0
	        }

	        // $.each(requests)
		        var myLatLng = new google.maps.LatLng(latitude, longitude);
		        map = new google.maps.Map(mapCanvas, differentMapOptions);
		        createMarker(myLatLng,map,'Thing');

		        $.each(requests, function(i, obj) {
					  //use obj.id and obj.name here, for example:
					  	thisLatLng = new google.maps.LatLng(obj.latitude, obj.longitude);
					  	// console.log(thisLatLng);
					  	createMarker(thisLatLng, map);
						});
	      }
	      google.maps.event.addDomListener(window, 'load', initialize);


	      var marker;
	      function createMarker(coords, map, title){
	        marker = new google.maps.Marker({
	          position: coords,
	          map: map,
	          title: title
	        });
	      }
	      // can I plot point from 311


    	</script>

  </head>
  <body>
    <div id="totally-different-map"></div>
  </body>
</html>
