<html>
  <head>
    <style>
    #request-show-map {
    width: 100%;
    height: 200px;
    }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js"></script>
    <script>
    function initialize() {
    var myLatlng = new google.maps.LatLng(<%= @request.latitude %>,<%= @request.longitude %>);
    var mapCanvas = document.getElementById('request-show-map');
    var differentMapOptions = {
    center: myLatlng,
    zoom: 18,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    tilt: 0
    }
    map = new google.maps.Map(mapCanvas, differentMapOptions);
    var marker = new google.maps.Marker({
      position: myLatlng,
      map: map,
      title: 'Hello World!'
    });
    }
    google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <h1>Service Request</h1>
    <table class="table table-condensed">
      <tr>
        <td>Type of Request</td>
        <td><%= @request[:type_of_service_request] %></td>
      </tr>
      <tr>
        <td>Service Request ID</td>
        <% if @request[:service_request_number].blank? %>
          <td>Processing.  Please check back in a couple minutes.</td>
        <% else %>
          <td>
            <%= link_to(@request[:service_request_number], "http://servicetracker.cityofchicago.org/requests/#{@request[:service_request_number]}") %>
          </td>
        <% end %>
      </tr>
        <tr>
        <td>Street Address</td>
        <td><%= @request[:street_address] %></td>
      </tr>
      <tr>
        <td>Status:</td>
        <td><%= @request[:status] %></td>
      </tr>
      <tr>
        <td>Date Created:</td>
        <td><%= @request[:creation_date].strftime("%m/%d/%Y") %></td>
      </tr>
      <% if @record.image_file_name %>
        <tr>
          <td>Image:</td>
          <td><%= render partial: 'image', locals: {record: @record} %></td>
        </tr>
      <% end %>
    </table>
    <div id="request-show-map"></div>
  </body>
</html>